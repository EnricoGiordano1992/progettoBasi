
----------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
-------------------------------------              PAZIENTE             ----------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE PAZIENTE (

    CODSAN              VARCHAR(10)     NOT NULL,
    NOME                VARCHAR(10)     NOT NULL,
    COGNOME             VARCHAR(10)     NOT NULL,
    NASCITA             DATE            NOT NULL,
    PSW                 VARCHAR(30)     NOT NULL,
    CITTA               VARCHAR(10)     NOT NULL,
    VIA                 VARCHAR(10)     NOT NULL,
    PROV                VARCHAR(10)     NOT NULL,
    CAP                 INT             NOT NULL,
    -- varchar per gestire i civici tipo 10/b
    CIVICO              VARCHAR(10)     NOT NULL,
    
    PRIMARY_KEY(CODSAN)
);



----------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
-------------------------------------        CARTELLA CLINICA           ----------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------


CREATE TABLE CARTELLA_CLINICA (

    ID                  VARCHAR(10)     NOT NULL,
    DATA_RICOVERO       DATE            NOT NULL,
    DATA_DIMISSIONE     DATE            NOT NULL,
    MOTIVO              VARCHAR(50)     NOT NULL,
    PROGNOSI            VARCHAR(50)             ,
    CODSAN              VARCHAR(10)     REFERENCES PAZIENTE(CODSAN),

    PRIMARY_KEY(ID),
    REFERENCES         
);



----------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
-------------------------------------             TERAPIE               ----------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------


CREATE TABLE TERAPIE (

    ID_CARTELLA         VARCHAR(10)     NOT NULL,
    INIZIO              DATE            NOT NULL,
    FINE                DATE            NOT NULL,
    FREQUENZA           INT             NOT NULL,
    DOSE                FLOAT(5)        NOT NULL,
    FARMACO             VARCHAR(10)     NOT NULL,
    
    FOREIGN_KEY(ID_CARTELLA) REFERENCES CARTELLA_CLINICA(ID)
);


----------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
-------------------------------------        FATTORI_RISCHIO            ----------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------


CREATE TABLE FATTORI_RISCHIO (

    NOME                VARCHAR(10)     PRIMARY_KEY

);



----------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
-------------------------------------        RISCHI_PAZIENTE            ----------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------


CREATE TABLE RISCHI_PAZIENTE (

    ID_PAZIENTE         VARCHAR(10)     FOREIGN_KEY REFERENCES PAZIENTE(CODSAN),
    NOME_FATTORE        VARCHAR(10)     FOREIGN_KEY REFERENCES FATTORI_RISCHIO(NOME) 

);



----------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
-------------------------------------             SINTOMI               ----------------------------------------------------------------
-------------------------------------                                   ----------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------


CREATE TABLE SINTOMI (

    ID_PAZIENTE         VARCHAR(10)     FOREIGN_KEY REFERENCES PAZIENTE(CODSAN),
    NOME                VARCHAR(10)     NOT NULL,
    INTENSITA           VARCHAR(10)       NOT NULL,


    PRIMARY_KEY         (NOME),
    CHECK(INTENSITA IN  ('bassa', 'media', 'alta'))

);

